---
- name: Download GNOME Shell extensions
  ansible.builtin.get_url:
    url: "{{ item.url }}"
    dest: "/tmp/{{ item.name }}.zip"

- name: Create GNOME extension directory
  ansible.builtin.file:
    path: "{{ home }}/.local/share/gnome-shell/extensions/{{ item.name }}"
    state: directory
    group: "{{ owner }}"
    owner: "{{ owner }}"
  register: res

- name: Unzip GNOME extensions
  when: res.changed
  block:
    - ansible.builtin.unarchive:
        src: "/tmp/{{ item.name }}.zip"
        dest: "{{ home }}/.local/share/gnome-shell/extensions/{{ item.name }}"
        group: "{{ owner }}"
        owner: "{{ owner }}"
        remote_src: true
    - ansible.builtin.debug:
        msg: Remember to restart gnome shell and rexecute the task to enable it